#!/bin/bash

# Set the SFTP connection details
host="$1"
user="$2"
password="$3"
port="$4"

# Enable non-interactive mode for password prompt
export SSHPASS="$password"

# Define the SFTP command
sftp_command="sftp -P $port $user@$host"

# Execute the SFTP command
$result=$(expect -c "
spawn $sftp_command
expect {
    \"*(yes/no)?\" {
        send \"yes\r\"
        exp_continue
    }
    \"*password:\" {
        send \"$password\r\"
    }
}
expect eof
")

# Print the result
echo "$result"

# Exit the script
exit
